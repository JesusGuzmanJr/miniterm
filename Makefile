##--------------------------------------------------------------------------------------------------
## Optional, user-provided configuration values
##--------------------------------------------------------------------------------------------------
INSTALL_PATH = /usr/local/bin

##--------------------------------------------------------------------------------------------------
## Hardcoded configuration values
##--------------------------------------------------------------------------------------------------
BIN_NAME = miniterm


.PHONY: all clean check clean install uninstall run

##--------------------------------------------------------------------------------------------------
## Build
##--------------------------------------------------------------------------------------------------
all:
	@cargo build --release

##--------------------------------------------------------------------------------------------------
## Clean
##--------------------------------------------------------------------------------------------------
clean:
	@cargo clean

##--------------------------------------------------------------------------------------------------
## Check
##--------------------------------------------------------------------------------------------------
check:
	@cargo check

##--------------------------------------------------------------------------------------------------
## Lint
##--------------------------------------------------------------------------------------------------
clippy:
	@cargo clippy

##--------------------------------------------------------------------------------------------------
## Install
##--------------------------------------------------------------------------------------------------
install: all
	sudo cp target/release/$(BIN_NAME) $(INSTALL_PATH)

##--------------------------------------------------------------------------------------------------
## Uninstall
##--------------------------------------------------------------------------------------------------
uninstall:
	sudo rm $(INSTALL_PATH)/$(BIN_NAME)

##--------------------------------------------------------------------------------------------------
## Run
##--------------------------------------------------------------------------------------------------
run: install
	sudo $(BIN_NAME)